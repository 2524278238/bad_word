# 项目简介
basedata文件夹存放各语向的原始数据

data文件夹存放生成的各种数据：
.word文件为mt5输出的纠正词或纠正提示、附有句子序号和输出概率
best.en\best.de 为多触发reranking挑选的翻译，
train.json为训练mt5和ppo阶段的训练数据
test.json为mt5进行纠正词预测的输入文件，带有infer的json文件为大模型进行翻译推理的输入文件

model存放各种训练的模型文件:
基础模型都是mt5

script是代码：
train_sft.py训练mt5纠正提示生成器，train_translation.py训练mt5纠正器
word2sft.py将train.json转换成train_sft.json
base.py集成多个功能，通过调用函数实现，具体可参考注释

---

## 实验结果

### Zh->En

| 方法                     | Llama2-7b<br>Comet | Llama2-7b<br>Comet ref free | Llama2-7b<br>Bleu | Llama3-8b<br>Comet | Llama3-8b<br>Comet ref free | Llama3-8b<br>Bleu |
|--------------------------|:------------------:|:---------------------------:|:-----------------:|:------------------:|:---------------------------:|:-----------------:|
| Baseline(直接翻译)       | 76.38              | 73.51                       | 19.34             | 79.21              | 76.31                       | 22.77             |
| 随机例句提示             | 76.34              | 73.67                       | 18.83             | 79.14              | 76.27                       | 22.17             |
| 含易错词例句提示         | 76.74              | 73.87                       | 19.33             | 79.53              | 76.53                       | 23.33             |
| BGE语义相似度选择提示    | 76.86              | 73.84                       | 19.32             | 79.65              | 76.53                       | 23.44             |
| BM25选择提示             | 76.68              | 73.71                       | 19.18             | 79.46              | 76.43                       | 23.28             |
| BM25选择库中提示         | 76.67              | 73.86                       | 19.19             | 78.81              | 75.89                       | 22.25             |
| 优质易错词提示           | 76.97              | 74.06                       | 19.73             | 79.57              | 76.64                       | 23.47             |
| 优质+BGE                 | 77.14              | 74.29                       | 19.47             | 79.76              | 76.87                       | 23.18             |

### En->De

| 方法                     | Llama2-7b<br>Comet | Llama2-7b<br>Comet ref free | Llama2-7b<br>Bleu | Llama3-8b<br>Comet | Llama3-8b<br>Comet ref free | Llama3-8b<br>Bleu |
|--------------------------|:------------------:|:---------------------------:|:-----------------:|:------------------:|:---------------------------:|:-----------------:|
| Baseline(直接翻译)       | 78.33              | 73.73                       | 21.27             | 81.90              | 78.35                       | 26.69             |
| 随机例句提示             | 79.24              | 75.42                       | 21.91             | 82.20              | 78.78                       | 26.97             |
| 含触发词例句提示         | 79.39              | 75.61                       | 22.02             | 82.17              | 78.79                       | 26.94             |
| BGE语义相似度选择提示    | 79.25              | 75.46                       | 21.90             | 82.19              | 78.73                       | 26.84             |
| BM25选择提示             | 79.31              | 75.60                       | 22.04             | 82.08              | 78.59                       | 27.12             |
| BM25选择库中提示         | 79.32              | 75.66                       | 22.09             | 82.19              | 78.65                       | 26.79             |
| 优质易错词提示           | 79.34              | 75.49                       | 22.08             | 82.25              | 78.90                       | 27.05             |
| 优质+BGE                 | 79.36              | 75.60                       | 22.10             | 82.18              | 78.80                       | 26.98             |